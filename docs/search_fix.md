# æœç´¢åŠŸèƒ½ä¿®å¤è¯´æ˜

## é—®é¢˜è¯Šæ–­
ç”¨æˆ·åé¦ˆ"æ€ä¹ˆç‚¹äº†searchæ²¡ååº”"ï¼Œç»è¿‡åˆ†æå‘ç°äº†ä»¥ä¸‹é—®é¢˜ï¼š

## ğŸ” å‘ç°çš„é—®é¢˜

### 1. å­—æ®µåè¾“å…¥æ§åˆ¶å™¨ç¼ºå¤±
**é—®é¢˜**: å­—æ®µåè¾“å…¥æ¡†æ²¡æœ‰TextEditingController
**å½±å“**: ç”¨æˆ·è¾“å…¥çš„å­—æ®µåæ— æ³•è¢«æ­£ç¡®æ•è·
**ä¿®å¤**: æ·»åŠ `_fieldController`å¹¶æ­£ç¡®ç»‘å®š

### 2. _canSearché€»è¾‘è¿‡äºä¸¥æ ¼
**é—®é¢˜**: æœç´¢æ¡ä»¶åˆ¤æ–­è¿‡äºä¸¥æ ¼ï¼Œå¯¼è‡´æŸäº›æœ‰æ•ˆæœç´¢è¢«é˜»æ­¢
**å½±å“**: å³ä½¿ç”¨æˆ·è¾“å…¥æ­£ç¡®ï¼Œæœç´¢æŒ‰é’®ä»ç„¶ç¦ç”¨
**ä¿®å¤**: é‡æ–°è®¾è®¡é€»è¾‘ï¼Œæ ¹æ®æœç´¢ç±»å‹åˆ†åˆ«åˆ¤æ–­

### 3. ç¼ºå°‘ç”¨æˆ·åé¦ˆ
**é—®é¢˜**: æœç´¢æ‰§è¡Œåæ²¡æœ‰æ˜ç¡®çš„æˆåŠŸ/å¤±è´¥åé¦ˆ
**å½±å“**: ç”¨æˆ·ä¸çŸ¥é“æœç´¢æ˜¯å¦æ‰§è¡Œæˆ–ç»“æœå¦‚ä½•
**ä¿®å¤**: æ·»åŠ SnackBaræç¤ºå’Œè°ƒè¯•ä¿¡æ¯

### 4. é”™è¯¯å¤„ç†ä¸å®Œå–„
**é—®é¢˜**: æœç´¢å¤±è´¥æ—¶æ²¡æœ‰è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
**å½±å“**: ç”¨æˆ·æ— æ³•äº†è§£å¤±è´¥åŸå› 
**ä¿®å¤**: æ·»åŠ try-catchå’Œè¯¦ç»†é”™è¯¯æç¤º

## ğŸ› ï¸ ä¿®å¤æªæ–½

### 1. æ·»åŠ å­—æ®µæ§åˆ¶å™¨
```dart
final _fieldController = TextEditingController();

// åœ¨TextFieldä¸­ç»‘å®š
TextField(
  controller: _fieldController,
  onChanged: (value) {
    setState(() {
      _fieldName = value;
    });
  },
)
```

### 2. ä¼˜åŒ–æœç´¢æ¡ä»¶é€»è¾‘
```dart
bool _canSearch(ElasticsearchProvider provider) {
  if (!provider.isConnected || provider.selectedIndex == null || provider.isLoading) {
    return false;
  }
  
  // For match_all, no additional fields required
  if (_searchType == 'match_all') {
    return true;
  }
  
  // For range queries, only need search text (time range)
  if (_searchType == 'range') {
    return _searchController.text.isNotEmpty;
  }
  
  // For other search types, need both field name and search text
  return _fieldName.isNotEmpty && _searchController.text.isNotEmpty;
}
```

### 3. å¢å¼ºç”¨æˆ·åé¦ˆ
**æˆåŠŸåé¦ˆ**:
```dart
ScaffoldMessenger.of(context).showSnackBar(
  SnackBar(
    content: Text('Found ${result.hits.total.value} results'),
    backgroundColor: AppTheme.accentGreen,
  ),
);
```

**é”™è¯¯åé¦ˆ**:
```dart
ScaffoldMessenger.of(context).showSnackBar(
  SnackBar(
    content: Text('Search error: $e'),
    backgroundColor: AppTheme.accentRed,
  ),
);
```

### 4. æ·»åŠ è°ƒè¯•ä¿¡æ¯
```dart
// Debug info panel
Container(
  child: Column(
    children: [
      Text('Connected: ${provider.isConnected}'),
      Text('Selected Index: ${provider.selectedIndex}'),
      Text('Search Type: $_searchType'),
      Text('Field Name: "$_fieldName"'),
      Text('Search Text: "${_searchController.text}"'),
      Text('Can Search: ${_canSearch(provider)}'),
    ],
  ),
)
```

### 5. æ”¹è¿›é”™è¯¯å¤„ç†
```dart
Future<void> _executeSearch(ElasticsearchProvider provider) async {
  try {
    print('Executing search with type: $_searchType, field: $_fieldName, query: ${_searchController.text}');
    
    final query = _buildQuery();
    print('Built query: $query');
    
    final result = await provider.search(
      index: provider.selectedIndex!,
      query: query,
      size: _size,
      from: 0,
    );
    
    // Handle success/failure with user feedback
    
  } catch (e) {
    print('Search error: $e');
    // Show error to user
  }
}
```

## ğŸ¯ æœç´¢ç±»å‹æ”¯æŒ

### Match All (è·å–æ‰€æœ‰æ–‡æ¡£)
- **æ¡ä»¶**: åªéœ€è¿æ¥å’Œé€‰æ‹©ç´¢å¼•
- **ç”¨é€”**: å¿«é€ŸæŸ¥çœ‹ç´¢å¼•å†…å®¹
- **ç¤ºä¾‹**: è·å–æœ€æ–°10æ¡è®°å½•

### Text Search (æ–‡æœ¬æœç´¢)
- **æ¡ä»¶**: éœ€è¦å­—æ®µåå’Œæœç´¢æ–‡æœ¬
- **ç”¨é€”**: åœ¨æŒ‡å®šå­—æ®µä¸­æœç´¢æ–‡æœ¬
- **ç¤ºä¾‹**: åœ¨titleå­—æ®µä¸­æœç´¢"error"

### Exact Match (ç²¾ç¡®åŒ¹é…)
- **æ¡ä»¶**: éœ€è¦å­—æ®µåå’Œç²¾ç¡®å€¼
- **ç”¨é€”**: ç²¾ç¡®åŒ¹é…å­—æ®µå€¼
- **ç¤ºä¾‹**: statuså­—æ®µç²¾ç¡®ç­‰äº"active"

### Date Range (æ—¶é—´èŒƒå›´)
- **æ¡ä»¶**: åªéœ€æ—¶é—´èŒƒå›´è¡¨è¾¾å¼
- **ç”¨é€”**: æŒ‰æ—¶é—´èŒƒå›´è¿‡æ»¤
- **ç¤ºä¾‹**: æœ€è¿‘1å°æ—¶çš„æ•°æ®

### Wildcard (é€šé…ç¬¦)
- **æ¡ä»¶**: éœ€è¦å­—æ®µåå’Œé€šé…ç¬¦æ¨¡å¼
- **ç”¨é€”**: æ¨¡ç³ŠåŒ¹é…
- **ç¤ºä¾‹**: filenameå­—æ®µåŒ¹é…"*.log"

## ğŸ“Š è°ƒè¯•åŠŸèƒ½

### å®æ—¶çŠ¶æ€æ˜¾ç¤º
ç”¨æˆ·ç°åœ¨å¯ä»¥çœ‹åˆ°ï¼š
- è¿æ¥çŠ¶æ€
- é€‰ä¸­çš„ç´¢å¼•
- å½“å‰æœç´¢ç±»å‹
- è¾“å…¥çš„å­—æ®µåå’Œæœç´¢æ–‡æœ¬
- æœç´¢æŒ‰é’®æ˜¯å¦å¯ç”¨

### æ§åˆ¶å°æ—¥å¿—
å¼€å‘è€…å¯ä»¥çœ‹åˆ°ï¼š
- æœç´¢å‚æ•°è¯¦æƒ…
- æ„å»ºçš„æŸ¥è¯¢JSON
- APIè°ƒç”¨ç»“æœ
- é”™è¯¯å †æ ˆä¿¡æ¯

## ğŸš€ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### å³æ—¶åé¦ˆ
- âœ… æœç´¢æˆåŠŸï¼šæ˜¾ç¤ºæ‰¾åˆ°çš„ç»“æœæ•°é‡
- âŒ æœç´¢å¤±è´¥ï¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
- â³ æœç´¢è¿›è¡Œä¸­ï¼šæ˜¾ç¤ºåŠ è½½çŠ¶æ€

### æ™ºèƒ½æç¤º
- æ ¹æ®æœç´¢ç±»å‹æ˜¾ç¤ºç›¸åº”çš„è¾“å…¥æç¤º
- å­—æ®µåå»ºè®®å’Œæœç´¢ç¤ºä¾‹
- æ¸…æ™°çš„æ“ä½œæŒ‡å¯¼

### é”™è¯¯é¢„é˜²
- å®æ—¶éªŒè¯è¾“å…¥æ¡ä»¶
- åŠ¨æ€å¯ç”¨/ç¦ç”¨æœç´¢æŒ‰é’®
- æ¸…æ™°çš„çŠ¶æ€æŒ‡ç¤º

## ğŸ”§ æŠ€æœ¯æ”¹è¿›

### çŠ¶æ€ç®¡ç†
- æ­£ç¡®çš„æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å“åº”å¼UIæ›´æ–°
- çŠ¶æ€åŒæ­¥ä¼˜åŒ–

### é”™è¯¯å¤„ç†
- å®Œæ•´çš„try-catchè¦†ç›–
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- å¼€å‘è€…è°ƒè¯•ä¿¡æ¯

### æ€§èƒ½ä¼˜åŒ–
- é¿å…ä¸å¿…è¦çš„é‡å»º
- åˆç†çš„çŠ¶æ€æ›´æ–°
- å†…å­˜æ³„æ¼é¢„é˜²

## âœ… æµ‹è¯•éªŒè¯

### æœç´¢åœºæ™¯æµ‹è¯•
1. **Match Allæœç´¢**: âœ… æ— éœ€é¢å¤–è¾“å…¥ï¼Œç›´æ¥æœç´¢
2. **æ–‡æœ¬æœç´¢**: âœ… éœ€è¦å­—æ®µåå’Œæœç´¢æ–‡æœ¬
3. **ç²¾ç¡®åŒ¹é…**: âœ… éœ€è¦å­—æ®µåå’Œç²¾ç¡®å€¼
4. **æ—¶é—´èŒƒå›´**: âœ… åªéœ€æ—¶é—´è¡¨è¾¾å¼
5. **é€šé…ç¬¦**: âœ… éœ€è¦å­—æ®µåå’Œæ¨¡å¼

### é”™è¯¯åœºæ™¯æµ‹è¯•
1. **æœªè¿æ¥**: âœ… æ˜¾ç¤ºè¿æ¥é”™è¯¯
2. **æœªé€‰æ‹©ç´¢å¼•**: âœ… æ˜¾ç¤ºç´¢å¼•é€‰æ‹©æç¤º
3. **è¾“å…¥ä¸å®Œæ•´**: âœ… æŒ‰é’®ç¦ç”¨ï¼ŒçŠ¶æ€æç¤º
4. **APIé”™è¯¯**: âœ… æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

## æ€»ç»“
æœç´¢åŠŸèƒ½ç°åœ¨å®Œå…¨æ­£å¸¸å·¥ä½œï¼š
- âœ… **æŒ‰é’®å“åº”**: ä¿®å¤äº†ç‚¹å‡»æ— ååº”çš„é—®é¢˜
- âœ… **è¾“å…¥éªŒè¯**: æ­£ç¡®æ•è·å’ŒéªŒè¯ç”¨æˆ·è¾“å…¥
- âœ… **ç”¨æˆ·åé¦ˆ**: æä¾›æ˜ç¡®çš„æˆåŠŸ/å¤±è´¥æç¤º
- âœ… **è°ƒè¯•æ”¯æŒ**: æ·»åŠ è¯¦ç»†çš„çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯
- âœ… **å¤šç§æœç´¢**: æ”¯æŒ5ç§ä¸åŒçš„æœç´¢ç±»å‹

ç”¨æˆ·ç°åœ¨å¯ä»¥é¡ºåˆ©è¿›è¡Œå„ç§ç±»å‹çš„æœç´¢ï¼Œå¹¶è·å¾—æ¸…æ™°çš„åé¦ˆå’Œç»“æœï¼